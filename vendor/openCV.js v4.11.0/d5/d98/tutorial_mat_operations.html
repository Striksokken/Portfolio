<!-- HTML header for doxygen 1.12.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>OpenCV: Operations with images</title>
<link rel="icon" href="../../opencv.ico" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/ams']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','ams']
  }
};
//<![CDATA[
window.MathJax = {
    loader: {load: ['[tex]/ams']},
    tex: {
        packages: {'[+]': ['ams']},
        macros: {
            matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
            fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
            forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
            forkfour: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ #7 & \\mbox{#8}\\\\ \\end{array} \\right.", 8],
            vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
            vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
            cameramatrix: ["#1 = \\begin{bmatrix} f_x & 0 & c_x\\\\ 0 & f_y & c_y\\\\ 0 & 0 & 1 \\end{bmatrix}", 1],
            distcoeffs: ["(k_1, k_2, p_1, p_2[, k_3[, k_4, k_5, k_6 [, s_1, s_2, s_3, s_4[, \\tau_x, \\tau_y]]]]) \\text{ of 4, 5, 8, 12 or 14 elements}"],
            distcoeffsfisheye: ["(k_1, k_2, k_3, k_4)"],
            hdotsfor: ["\\dots", 1],
            mathbbm: ["\\mathbb{#1}", 1],
            bordermatrix: ["\\matrix{#1}", 1]
        },
        processEscapes: false
    }
};
//]]>
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-chtml.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../opencv-logo-small.png"/></td>
  <td id="projectalign">
   <div id="projectname">OpenCV<span id="projectnumber">&#160;4.11.0</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/df8/tutorial_root.html">OpenCV Tutorials</a></li><li class="navelem"><a class="el" href="../../de/d7a/tutorial_table_of_content_core.html">The Core Functionality (core module)</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Operations with images</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul>
  <li class="level1">
    <a href="#autotoc_md339">Input/Output</a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md340">Images</a>
      </li>
    </ul>
  </li>
  <li class="level1">
    <a href="#autotoc_md341">Basic operations with images</a>
    <ul>
      <li class="level2">
        <a href="#autotoc_md342">Accessing pixel intensity values</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md343">Memory management and reference counting</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md344">Primitive operations</a>
      </li>
      <li class="level2">
        <a href="#autotoc_md345">Visualizing images</a>
      </li>
    </ul>
  </li>
</ul>
</div>
<div class="textblock"><p><a class="anchor" id="md__2build_24__x-contrib__docs-lin64_2opencv_2doc_2tutorials_2core_2mat__operations"></a></p>
<p><b>Prev Tutorial:</b> <a class="el" href="../../d7/d37/tutorial_mat_mask_operations.html">Mask operations on matrices</a> <br  />
<b>Next Tutorial:</b> <a class="el" href="../../d5/dc4/tutorial_adding_images.html">Adding (blending) two images using OpenCV</a> <br  />
 </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight"></th><th class="markdownTableHeadLeft"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Compatibility   </td><td class="markdownTableBodyLeft">OpenCV &gt;= 3.0   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md339"></a>
Input/Output</h1>
<h2><a class="anchor" id="autotoc_md340"></a>
Images</h2>
<p>Load an image from a file:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">imread</a>(filename);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            Mat img = Imgcodecs.imread(filename);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">cv.imread</a>(filename)</div>
</div><!-- fragment -->  </div> <p>If you read a jpg file, a 3 channel image is created by default. If you need a grayscale image, use:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">imread</a>(filename, IMREAD_GRAYSCALE);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            Mat img = Imgcodecs.imread(filename, Imgcodecs.IMREAD_GRAYSCALE);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">cv.imread</a>(filename, cv.IMREAD_GRAYSCALE)</div>
</div><!-- fragment -->  </div> <dl class="section note"><dt>Note</dt><dd>Format of the file is determined by its content (first few bytes). To save an image to a file:</dd></dl>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#ga8ac397bd09e48851665edbe12aa28f25">imwrite</a>(filename, img);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            Imgcodecs.imwrite(filename, img);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#ga8ac397bd09e48851665edbe12aa28f25">cv.imwrite</a>(filename, img)</div>
</div><!-- fragment -->  </div> <dl class="section note"><dt>Note</dt><dd>Format of the file is determined by its extension.</dd>
<dd>
Use <a class="el" href="../../d4/da8/group__imgcodecs.html#gaad518fe65098fd32446bd5b9c4f8b531" title="Reads an image from a buffer in memory.">cv::imdecode</a> and <a class="el" href="../../d4/da8/group__imgcodecs.html#ga4e9883ae1f619bcbe875b7038520ea78" title="Encodes an image into a memory buffer.">cv::imencode</a> to read and write an image from/to memory rather than a file.</dd></dl>
<h1><a class="anchor" id="autotoc_md341"></a>
Basic operations with images</h1>
<h2><a class="anchor" id="autotoc_md342"></a>
Accessing pixel intensity values</h2>
<p>In order to get pixel intensity value, you have to know the type of an image and the number of channels. Here is an example for a single channel grey scale image (type 8UC1) and pixel coordinates x and y:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">            <a class="code hl_class" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a> intensity = img.at&lt;<a class="code hl_typedef" href="../../d1/d1b/group__core__hal__interface.html#ga65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(y, x);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">                byte[] imgData = new byte[(int) (img.total() * img.channels())];</div>
<div class="line">                img.get(0, 0, imgData);</div>
<div class="line">                byte intensity = imgData[y * img.cols() + x];</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    _intensity = img[y,x]</div>
</div><!-- fragment -->  </div> <p>C++ version only: intensity.val[0] contains a value from 0 to 255. Note the ordering of x and y. Since in OpenCV images are represented by the same structure as matrices, we use the same convention for both cases - the 0-based row index (or y-coordinate) goes first and the 0-based column index (or x-coordinate) follows it. Alternatively, you can use the following notation (<b>C++ only</b>):</p>
<div class="fragment"><div class="line">            <a class="code hl_class" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a> intensity = img.at&lt;<a class="code hl_typedef" href="../../d1/d1b/group__core__hal__interface.html#ga65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(<a class="code hl_class" href="../../db/d4e/classcv_1_1Point__.html">Point</a>(x, y));</div>
</div><!-- fragment --><p>Now let us consider a 3 channel image with BGR color ordering (the default format returned by imread):</p>
<p><b>C++ code</b> </p><div class="fragment"><div class="line">            <a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">Vec3b</a> intensity = img.at&lt;<a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">Vec3b</a>&gt;(y, x);</div>
<div class="line">            <a class="code hl_typedef" href="../../d1/d1b/group__core__hal__interface.html#ga65f85814a8290f9797005d3b28e7e5fc">uchar</a> blue = intensity.<a class="code hl_variable" href="../../de/de1/classcv_1_1Matx.html#afa9ad3bc5b09ebcdfc6f98f44c15191d">val</a>[0];</div>
<div class="line">            <a class="code hl_typedef" href="../../d1/d1b/group__core__hal__interface.html#ga65f85814a8290f9797005d3b28e7e5fc">uchar</a> green = intensity.<a class="code hl_variable" href="../../de/de1/classcv_1_1Matx.html#afa9ad3bc5b09ebcdfc6f98f44c15191d">val</a>[1];</div>
<div class="line">            <a class="code hl_typedef" href="../../d1/d1b/group__core__hal__interface.html#ga65f85814a8290f9797005d3b28e7e5fc">uchar</a> red = intensity.<a class="code hl_variable" href="../../de/de1/classcv_1_1Matx.html#afa9ad3bc5b09ebcdfc6f98f44c15191d">val</a>[2];</div>
</div><!-- fragment --><p><b>Python Python</b> </p><div class="fragment"><div class="line">    _blue = img[y,x,0]</div>
<div class="line">    _green = img[y,x,1]</div>
<div class="line">    _red = img[y,x,2]</div>
</div><!-- fragment --><p>You can use the same method for floating-point images (for example, you can get such an image by running Sobel on a 3 channel image) (<b>C++ only</b>):</p>
<div class="fragment"><div class="line">            <a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">Vec3f</a> intensity = img.at&lt;<a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">Vec3f</a>&gt;(y, x);</div>
<div class="line">            <span class="keywordtype">float</span> blue = intensity.<a class="code hl_variable" href="../../de/de1/classcv_1_1Matx.html#afa9ad3bc5b09ebcdfc6f98f44c15191d">val</a>[0];</div>
<div class="line">            <span class="keywordtype">float</span> green = intensity.<a class="code hl_variable" href="../../de/de1/classcv_1_1Matx.html#afa9ad3bc5b09ebcdfc6f98f44c15191d">val</a>[1];</div>
<div class="line">            <span class="keywordtype">float</span> red = intensity.<a class="code hl_variable" href="../../de/de1/classcv_1_1Matx.html#afa9ad3bc5b09ebcdfc6f98f44c15191d">val</a>[2];</div>
</div><!-- fragment --><p>The same method can be used to change pixel intensities:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">            img.at&lt;<a class="code hl_typedef" href="../../d1/d1b/group__core__hal__interface.html#ga65f85814a8290f9797005d3b28e7e5fc">uchar</a>&gt;(y, x) = 128;</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">                byte[] imgData = new byte[(int) (img.total() * img.channels())];</div>
<div class="line">                imgData[y * img.cols() + x] = (byte) 128;</div>
<div class="line">                img.put(0, 0, imgData);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img[y,x] = 128</div>
</div><!-- fragment -->  </div> <p>There are functions in OpenCV, especially from calib3d module, such as <a class="el" href="../../d9/d0c/group__calib3d.html#ga1019495a2c8d1743ed5cc23fa0daff8c" title="Projects 3D points to an image plane.">cv::projectPoints</a>, that take an array of 2D or 3D points in the form of Mat. Matrix should contain exactly one column, each row corresponds to a point, matrix type should be 32FC2 or 32FC3 correspondingly. Such a matrix can be easily constructed from <code>std::vector</code> (<b>C++ only</b>):</p>
<div class="fragment"><div class="line">            vector&lt;Point2f&gt; points;</div>
<div class="line">            <span class="comment">//... fill the array</span></div>
<div class="line">            <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> pointsMat = <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a>(points);</div>
</div><!-- fragment --><p>One can access a point in this matrix using the same method <code>Mat::at</code> (<b>C++ only</b>):</p>
<div class="fragment"><div class="line">            <a class="code hl_class" href="../../db/d4e/classcv_1_1Point__.html">Point2f</a> point = pointsMat.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#aa10d804e90b51d4157b5c26e12c5d2df">at</a>&lt;<a class="code hl_class" href="../../db/d4e/classcv_1_1Point__.html">Point2f</a>&gt;(i, 0);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md343"></a>
Memory management and reference counting</h2>
<p>Mat is a structure that keeps matrix/image characteristics (rows and columns number, data type etc) and a pointer to data. So nothing prevents us from having several instances of Mat corresponding to the same data. A Mat keeps a reference count that tells if data has to be deallocated when a particular instance of Mat is destroyed. Here is an example of creating two matrices without copying data (<b>C++ only</b>):</p>
<div class="fragment"><div class="line">        std::vector&lt;Point3f&gt; points;</div>
<div class="line">        <span class="comment">// .. fill the array</span></div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> pointsMat = <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a>(points).<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#a4eb96e3251417fa88b78e2abd6cfd7d8">reshape</a>(1);</div>
</div><!-- fragment --><p>As a result, we get a 32FC1 matrix with 3 columns instead of 32FC3 matrix with 1 column. <code>pointsMat</code> uses data from points and will not deallocate the memory when destroyed. In this particular instance, however, developer has to make sure that lifetime of <code>points</code> is longer than of <code>pointsMat</code> If we need to copy the data, this is done using, for example, <a class="el" href="../../d3/d63/classcv_1_1Mat.html#a33fd5d125b4c302b0c9aa86980791a77" title="Copies the matrix to another one.">cv::Mat::copyTo</a> or <a class="el" href="../../d3/d63/classcv_1_1Mat.html#a03d2a2570d06dcae378f788725789aa4" title="Creates a full copy of the array and the underlying data.">cv::Mat::clone</a>:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">imread</a>(<span class="stringliteral">&quot;image.jpg&quot;</span>);</div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img1 = img.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#a03d2a2570d06dcae378f788725789aa4">clone</a>();</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            Mat img = Imgcodecs.imread(<span class="stringliteral">&quot;image.jpg&quot;</span>);</div>
<div class="line">            Mat img1 = img.clone();</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">cv.imread</a>(<span class="stringliteral">&#39;image.jpg&#39;</span>)</div>
<div class="line">    _img1 = np.copy(img)</div>
</div><!-- fragment -->  </div> <p>An empty output Mat can be supplied to each function. Each implementation calls Mat::create for a destination matrix. This method allocates data for a matrix if it is empty. If it is not empty and has the correct size and type, the method does nothing. If however, size or type are different from the input arguments, the data is deallocated (and lost) and a new data is allocated. For example:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">imread</a>(<span class="stringliteral">&quot;image.jpg&quot;</span>);</div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> sobelx;</div>
<div class="line">        <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#gacea54f142e81b6758cb6f375ce782c8d">Sobel</a>(img, sobelx, <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a>, 1, 0);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            Mat img = Imgcodecs.imread(<span class="stringliteral">&quot;image.jpg&quot;</span>);</div>
<div class="line">            Mat sobelx = <span class="keyword">new</span> Mat();</div>
<div class="line">            Imgproc.Sobel(img, sobelx, CvType.CV_32F, 1, 0);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">cv.imread</a>(<span class="stringliteral">&#39;image.jpg&#39;</span>)</div>
<div class="line">    _sobelx = <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#gacea54f142e81b6758cb6f375ce782c8d">cv.Sobel</a>(img, cv.CV_32F, 1, 0)</div>
</div><!-- fragment -->  </div> <h2><a class="anchor" id="autotoc_md344"></a>
Primitive operations</h2>
<p>There is a number of convenient operators defined on a matrix. For example, here is how we can make a black image from an existing greyscale image <code>img</code></p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">            img = <a class="code hl_class" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a>(0);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">                <span class="keywordtype">byte</span>[] imgData = <span class="keyword">new</span> <span class="keywordtype">byte</span>[(int) (img.total() * img.channels())];</div>
<div class="line">                Arrays.fill(imgData, (<span class="keywordtype">byte</span>) 0);</div>
<div class="line">                img.put(0, 0, imgData);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img[:] = 0</div>
</div><!-- fragment -->  </div> <p>Selecting a region of interest:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">            <a class="code hl_class" href="../../d2/d44/classcv_1_1Rect__.html">Rect</a> r(10, 10, 100, 100);</div>
<div class="line">            <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> smallImg = img(r);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">                <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga11d95de507098e90bad732b9345402e8">Rect</a> r = <span class="keyword">new</span> <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga11d95de507098e90bad732b9345402e8">Rect</a>(10, 10, 100, 100);</div>
<div class="line">                Mat smallImg = img.submat(r);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    _smallImg = img[10:110,10:110]</div>
</div><!-- fragment -->  </div> <p>Conversion from color to greyscale:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">imread</a>(<span class="stringliteral">&quot;image.jpg&quot;</span>); <span class="comment">// loading a 8UC3 image</span></div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> grey;</div>
<div class="line">        <a class="code hl_function" href="../../d8/d01/group__imgproc__color__conversions.html#gaf86c09fe702ed037c03c2bc603ceab14">cvtColor</a>(img, grey, COLOR_BGR2GRAY);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            Mat img = Imgcodecs.imread(<span class="stringliteral">&quot;image.jpg&quot;</span>); <span class="comment">// loading a 8UC3 image</span></div>
<div class="line">            Mat grey = <span class="keyword">new</span> Mat();</div>
<div class="line">            Imgproc.cvtColor(img, grey, Imgproc.COLOR_BGR2GRAY);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">cv.imread</a>(<span class="stringliteral">&#39;image.jpg&#39;</span>)</div>
<div class="line">    _grey = <a class="code hl_function" href="../../d8/d01/group__imgproc__color__conversions.html#gaf86c09fe702ed037c03c2bc603ceab14">cv.cvtColor</a>(img, cv.COLOR_BGR2GRAY)</div>
</div><!-- fragment -->  </div> <p>Change image type from 8UC1 to 32FC1:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        src.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#adf88c60c5b4980e05bb556080916978b">convertTo</a>(dst, <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a>);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            src.convertTo(dst, CvType.CV_32F);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    _dst = src.astype(np.float32)</div>
</div><!-- fragment -->  </div> <h2><a class="anchor" id="autotoc_md345"></a>
Visualizing images</h2>
<p>It is very useful to see intermediate results of your algorithm during development process. OpenCV provides a convenient way of visualizing images. A 8U image can be shown using:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">imread</a>(<span class="stringliteral">&quot;image.jpg&quot;</span>);</div>
<div class="line">        <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">namedWindow</a>(<span class="stringliteral">&quot;image&quot;</span>, WINDOW_AUTOSIZE);</div>
<div class="line">        <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">imshow</a>(<span class="stringliteral">&quot;image&quot;</span>, img);</div>
<div class="line">        <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">waitKey</a>();</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            Mat img = Imgcodecs.imread(<span class="stringliteral">&quot;image.jpg&quot;</span>);</div>
<div class="line">            HighGui.namedWindow(<span class="stringliteral">&quot;image&quot;</span>, HighGui.WINDOW_AUTOSIZE);</div>
<div class="line">            HighGui.imshow(<span class="stringliteral">&quot;image&quot;</span>, img);</div>
<div class="line">            HighGui.waitKey();</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">cv.imread</a>(<span class="stringliteral">&#39;image.jpg&#39;</span>)</div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">cv.namedWindow</a>(<span class="stringliteral">&#39;image&#39;</span>, cv.WINDOW_AUTOSIZE)</div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">cv.imshow</a>(<span class="stringliteral">&#39;image&#39;</span>, img)</div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">cv.waitKey</a>()</div>
</div><!-- fragment -->  </div> <p>A call to waitKey() starts a message passing cycle that waits for a key stroke in the "image" window. A 32F image needs to be converted to 8U type. For example:</p>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">imread</a>(<span class="stringliteral">&quot;image.jpg&quot;</span>);</div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> grey;</div>
<div class="line">        <a class="code hl_function" href="../../d8/d01/group__imgproc__color__conversions.html#gaf86c09fe702ed037c03c2bc603ceab14">cvtColor</a>(img, grey, COLOR_BGR2GRAY);</div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> sobelx;</div>
<div class="line">        <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#gacea54f142e81b6758cb6f375ce782c8d">Sobel</a>(grey, sobelx, <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a>, 1, 0);</div>
<div class="line">        <span class="keywordtype">double</span> minVal, maxVal;</div>
<div class="line">        <a class="code hl_function" href="../../d2/de8/group__core__array.html#gab473bf2eb6d14ff97e89b355dac20707">minMaxLoc</a>(sobelx, &amp;minVal, &amp;maxVal); <span class="comment">//find minimum and maximum intensities</span></div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> draw;</div>
<div class="line">        sobelx.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#adf88c60c5b4980e05bb556080916978b">convertTo</a>(draw, <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga32b18d904ee2b1731a9416a8eef67d06">CV_8U</a>, 255.0/(maxVal - minVal), -minVal * 255.0/(maxVal - minVal));</div>
<div class="line">        <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">namedWindow</a>(<span class="stringliteral">&quot;image&quot;</span>, WINDOW_AUTOSIZE);</div>
<div class="line">        <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">imshow</a>(<span class="stringliteral">&quot;image&quot;</span>, draw);</div>
<div class="line">        <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">waitKey</a>();</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">            Mat img = Imgcodecs.imread(<span class="stringliteral">&quot;image.jpg&quot;</span>);</div>
<div class="line">            Mat grey = <span class="keyword">new</span> Mat();</div>
<div class="line">            Imgproc.cvtColor(img, grey, Imgproc.COLOR_BGR2GRAY);</div>
<div class="line">            Mat sobelx = <span class="keyword">new</span> Mat();</div>
<div class="line">            Imgproc.Sobel(grey, sobelx, CvType.CV_32F, 1, 0);</div>
<div class="line">            MinMaxLocResult res = Core.minMaxLoc(sobelx); <span class="comment">// find minimum and maximum intensities</span></div>
<div class="line">            Mat draw = <span class="keyword">new</span> Mat();</div>
<div class="line">            <span class="keywordtype">double</span> maxVal = res.maxVal, minVal = res.minVal;</div>
<div class="line">            sobelx.convertTo(draw, CvType.CV_8U, 255.0 / (maxVal - minVal), -minVal * 255.0 / (maxVal - minVal));</div>
<div class="line">            HighGui.namedWindow(<span class="stringliteral">&quot;image&quot;</span>, HighGui.WINDOW_AUTOSIZE);</div>
<div class="line">            HighGui.imshow(<span class="stringliteral">&quot;image&quot;</span>, draw);</div>
<div class="line">            HighGui.waitKey();</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gacbaa02cffc4ec2422dfa2e24412a99e2">cv.imread</a>(<span class="stringliteral">&#39;image.jpg&#39;</span>)</div>
<div class="line">    grey = <a class="code hl_function" href="../../d8/d01/group__imgproc__color__conversions.html#gaf86c09fe702ed037c03c2bc603ceab14">cv.cvtColor</a>(img, cv.COLOR_BGR2GRAY)</div>
<div class="line">    sobelx = <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#gacea54f142e81b6758cb6f375ce782c8d">cv.Sobel</a>(grey, cv.CV_32F, 1, 0)</div>
<div class="line">    <span class="comment"># find minimum and maximum intensities</span></div>
<div class="line">    minVal = np.amin(sobelx)</div>
<div class="line">    maxVal = np.amax(sobelx)</div>
<div class="line">    draw = <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga3460e9c9f37b563ab9dd550c4d8c4e7d">cv.convertScaleAbs</a>(sobelx, alpha=255.0/(maxVal - minVal), beta=-minVal * 255.0/(maxVal - minVal))</div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">cv.namedWindow</a>(<span class="stringliteral">&#39;image&#39;</span>, cv.WINDOW_AUTOSIZE)</div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">cv.imshow</a>(<span class="stringliteral">&#39;image&#39;</span>, draw)</div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">cv.waitKey</a>()</div>
</div><!-- fragment -->  </div> <dl class="section note"><dt>Note</dt><dd>Here <a class="el" href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b" title="Creates a window.">cv::namedWindow</a> is not necessary since it is immediately followed by <a class="el" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563" title="Displays an image in the specified window.">cv::imshow</a>. Nevertheless, it can be used to change the window properties or when using <a class="el" href="../../d7/dfc/group__highgui.html#gaf78d2155d30b728fc413803745b67a9b" title="Creates a trackbar and attaches it to the specified window.">cv::createTrackbar</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.12.0-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jan 8 2025 16:06:34 for OpenCV by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
